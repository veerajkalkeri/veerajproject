node
{
def mavenHome  =tool name:"maven 3.8.4"
stage ('git hub pulling')
{
git 'https://github.com/veerajkalkeri/tech1.git'
}
stage ('build')
{
sh  "${mavenHome}/bin/mvn clean package"
}
stage ('nexus')
{
sh "${mavenHome}/bin/mvn clean package deploy"
}
stage ('tomcat')
{
sshagent(['c1608032-4e25-49c9-93db-4f5e3350d210'])
{
sh "scp -o StrictHostKeyChecking=no target/maven-web-application.war ec2-user@52.66.236.73/:/opt/apache-tomcat-9.0.68/webapps"
} 
}

}
